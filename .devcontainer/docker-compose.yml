#version: "3.8"
#services:
#  app:
#    image: mcr.microsoft.com/devcontainers/javascript-node:20
#    command: sleep infinity
#    volumes:
#      - ..:/workspaces/${localWorkspaceFolderBasename}:cached
#    working_dir: /workspaces/${localWorkspaceFolderBasename}
#    depends_on:
#      mongo:
#        condition: service_healthy
#      neo4j:
#        condition: service_healthy
#      redis:
#        condition: service_healthy
#
#  mongo:
#    image: mongo:7
#    restart: unless-stopped
#    environment:
#      MONGO_INITDB_ROOT_USERNAME: root
#      MONGO_INITDB_ROOT_PASSWORD: example
#    volumes:
#      - mongo-data:/data/db
#    healthcheck:
#      test: ["CMD-SHELL", "echo 'db.runCommand({ping:1}).ok' | mongosh --host 127.0.0.1 --port 27017 --username root --password example --authenticationDatabase admin --quiet | grep -q 1"]
#      interval: 5s
#      timeout: 3s
#      retries: 20
#
#  neo4j:
#    image: neo4j:5-community
#    restart: unless-stopped
#    environment:
#      NEO4J_AUTH: neo4j/devpassword
#      NEO4J_dbms_memory_pagecache_size: 512M
#      NEO4J_dbms_memory_heap_initial__size: 512M
#      NEO4J_dbms_memory_heap_max__size: 1G
#    volumes:
#      - neo4j-data:/data
#      - neo4j-logs:/logs
#      - neo4j-plugins:/plugins
#    healthcheck:
#      test: ["CMD-SHELL", "echo 'RETURN 1' | cypher-shell -u neo4j -p devpassword --format plain | grep -q 1"]
#      interval: 10s
#      timeout: 5s
#      retries: 20
#
#  redis:
#    image: redis:7
#    restart: unless-stopped
#    command: ["redis-server", "--appendonly", "yes"]
#    volumes:
#      - redis-data:/data
#    healthcheck:
#      test: ["CMD", "redis-cli", "ping"]
#      interval: 5s
#      timeout: 3s
#      retries: 20
#
#volumes:
#  mongo-data:
#  neo4j-data:
#  neo4j-logs:
#  neo4j-plugins:
#  redis-data:
#
