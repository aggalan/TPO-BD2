# .devcontainer/docker-compose.yml
services:
 app:
   build:
     context: ..
     dockerfile: Dockerfile
   container_name: tp-app
   ports:
     - "3000:3000"
   volumes:
     - ..:/workspace
   environment:
     PORT: "3000"
     MONGO_URI: "mongodb://mongo:27017/aseguradora"
     REDIS_HOST: "redis"
     REDIS_PORT: "6379"
   depends_on:
     - mongo
     - redis
   command: npm run dev

 mongo:
   image: mongo:6
   container_name: tp-mongo
   ports:
     - "27017:27017"
   volumes:
     - mongo-data:/data/db

 redis:
   image: redis:7
   container_name: tp-redis
   ports:
     - "6379:6379"
   volumes:
     - redis-data:/data

volumes:
 mongo-data:
 redis-data:
